<!DOCTYPE HTML>
<html class="no-js">
    <head>
        <!-- <meta charset="utf-8"> -->
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"></meta>
        <title>EVT Viewer</title>
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width">

        <!-- Place favicon.ico and apple-touch-icon.png in the root directory -->
        


        <!-- TODO: temp -->
        <!--<link rel="stylesheet" type="text/css" href="css/main.css"></link>-->
        <!-- <link rel="stylesheet" type="text/css" href="css/page_data-include.css"></link> -->
        <!-- <link rel="stylesheet" type="text/css" href="css/jquery-ui-1.9.0.custom.css"></link> -->
        <!-- <link rel="stylesheet" type="text/css" href="css/ImageTextLink.css"></link> -->
        <!-- <link rel="stylesheet" type="text/css" href="css/jquery.jqzoom.css"></link> -->
        <link rel="stylesheet" type="text/css" href="fonts/font-awesome.min.css"></link>
        <!-- endbuild -->
        
        <link rel="stylesheet" href="styles/main.987aa5ac.css">

        <link rel="stylesheet" type="text/css" href="config/custom-style.css"></link>
    </head>
    <body ng-app="evtviewer" 
        ng-controller="InterfaceCtrl" 
        ng-keydown="handleKeydownEvent($event)"
        ng-click="handleGenericClick($event)">
    <!--[if lt IE 7]>
      <p class="browsehappy">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</p>
    <![endif]-->

    <!-- Add your site or application content here -->
    

    <header>
        {{ getProperty('indexTitle') }}
        <div class="globalMenu">
            <button-switch 
                    title="{{mode.label}}"
                    class="mode-view"
                    data-label=""
                    data-icon="{{mode.icon}}"
                    data-value="{{mode.viewMode}}"
                    data-type="changeViewMode"
                    ng-repeat="mode in getAvailableViewModes()"
                    ng-if="mode.visible">
            </button-switch>
            <!-- <button-switch 
                    title="Witnesses"
                    data-icon="witnesses"
                    data-type="openGlobalDialogWitnesses">
            </button-switch> -->
            <button-switch 
                    class="smaller"
                    title="Info"
                    data-icon="info"
                    data-type="openGlobalDialogInfo">
            </button-switch>
            <button-switch 
                    title="Bookmark"
                    data-icon="bookmark"                    
                    data-type="bookmark">
            </button-switch>
            <!-- <button-switch 
                    class="noPadding"
                    title="Menu"
                    data-icon="menu-vert"                    
                    data-type="openMenu">
            </button-switch> -->
        </div>
    </header>
    <section 
        class="secondary-container" 
        ng-show="getSecondaryContentOpened() !== ''"  
        ng-if="!isLoading()">
        <evt-dialog data-type="globalInfo" data-title="Project Info">
            <evt-tabs-container 
                data-type="projectInfo" 
                data-orientation="vertical">
            </evt-tabs-container>
        </evt-dialog>
        <evt-dialog data-type="witnessesList" data-title="Witnesses">
            <div compile="getWitnessesListFormatted()"></div>
        </evt-dialog>
        <evt-dialog data-type="bookmark" data-title="Bookmark">
            <div compile="getBookmark()"></div>
        </evt-dialog>
    </section>
    
    <section id="global-container" ng-switch="getCurrentViewMode()" ng-if="!isLoading()">
        <!-- <div id="left-nav"><span><i class="fa fa-chevron-circle-left"></i></span></div> -->
        
        <!-- CRITICAL -->
        <section id="main-container" class="viewMode" ng-switch-when="critical">
            <box data-type="text"
                 data-edition="{{getCurrentEdition()}}"
                 id="mainText"
                 ng-show="existCriticalText()"
                 ng-class="{'centered': !isPinnedAppBoardOpened(),
                            'half-centered': isPinnedAppBoardOpened()}"></box>
            <button-switch 
                    title="Show pinned apparatus entries"
                    data-label=""
                    data-icon="pin"
                    data-type="togglePinned"
                    ng-if="isToolAvailable('toolPinAppEntries') && getPinnedEntries().length > 0 && entry !== ''"
                    class="togglePinned_btn"
                    ng-class="{'centered': !isPinnedAppBoardOpened(),
                               'half-centered': isPinnedAppBoardOpened()}">
            </button-switch>

            <box data-type="pinnedBoard" 
                ng-show="!isLoading() && isPinnedAppBoardOpened()">
                 <span ng-if="!isLoading() && getPinnedEntries().length <= 0">
                    <!--No apparatus entries pinned.--></span>
                 <evt-critical-apparatus-entry 
                    class="in_critical_apparatus" 
                    ng-class="{'active': getCurrentAppEntry() === entry}"
                    ng-if="getPinnedEntries().length > 0 && entry !== ''"
                    ng-click="updateCurrentAppEntry(entry);"
                    ng-repeat="entry in getPinnedEntries()"
                    data-type="pinned"
                    data-app-id="{{entry}}"></evt-critical-apparatus-entry>
            </box>
        </section> 

        <!-- COLLAZIONE -->
        <section id="main-container" class="viewMode" ng-switch-when="collation">
            <box data-type="text"
                 data-edition="{{getCurrentEdition()}}"
                 id="mainText"
                 ng-show="existCriticalText()"></box>
            <!-- <div 
                compile="printCriticalApparatus()"
                style="position: absolute; background: rgb(255, 255, 255) none repeat scroll 0% 0%;"> -->

            <div class="compareWits_box" id="compareWits_box"
                 ng-class="{'span9of18': (existCriticalText() && getCurrentWitnesses().length <= 1),
                            'span18of18': !existCriticalText()}">
                <box data-type="witness"
                     data-witness="{{witness}}"
                     data-witpage="{{getCurrentWitnessPage(witness)}}"
                     ng-repeat="witness in getCurrentWitnesses()" ></box>
            </div>
            <button-switch 
                    title="Add Witness"
                    data-label="Add Witness"
                    data-icon="add"
                    data-type="addWit"
                    class="compareWits_box--buttonAddWit inverted-color witnessSelector"
                    ng-class="{'left75': (!existCriticalText() && getCurrentWitnesses().length == 1) || (existCriticalText() && getCurrentWitnesses().length == 0),
                                'floatRight': (!existCriticalText() && getCurrentWitnesses().length > 1) || (existCriticalText() && getCurrentWitnesses().length > 0)}">
            </button-switch>

            <div 
                ng-if="isWitnessSelectorActive()"
                class="availableWitnesses-selector witnessSelector"
                ng-class="{'left75': (!existCriticalText() && getCurrentWitnesses().length == 1) || (existCriticalText() && getCurrentWitnesses().length == 0)}">
                <span 
                    ng-click="addWitness(witness)" 
                    ng-repeat="witness in getAvailableWitnesses()">{{getWitness(witness)}}</span>
            </div>

        </section>       

        <!-- TXT TXT -->
        <section id="main-container" class="viewMode" ng-switch-when="txtTxt">
            <box data-type="text"
                 data-edition="{{getCurrentEdition()}}"
                 id="mainText1"></box>
            <box data-type="text"
                 data-edition="{{getCurrentEdition()}}"
                 id="mainText2"></box>
        </section>

        <!-- IMG TXT -->
        <section id="main-container" class="viewMode" ng-switch-when="imgTxt">
            <box data-type="image"
                 id="mainImage"></box>
            <box data-type="text"
                 data-edition="{{getCurrentEdition()}}"
                 id="mainText"></box>
        </section>

        <!-- LOADING... -->
        <section id="main-container" class="viewMode" ng-switch-default>
            <div class="loading"><i class="fa fa-spinner fa-pulse loader"></i></div>
        </section>
        <!-- <div id="right-nav"><span><i class="fa fa-chevron-circle-right"></i></span></div> -->
    </section>

    <section class="global-msg-container" 
            ng-if="!isLoading() && getErrorMsg() !== undefined && getErrorMsg().title !== ''">
        <div class="global-msg"> 
            <h1>EVT Viewer</h1>
            <h2>{{getErrorMsg().title}}</h2>
            <p>{{ getErrorMsg().msg }}</p>
        </div>
    </section>

    <section class="global-loading-container" 
            ng-hide="!isLoading()">
        <!-- LOADING... -->
        <div class="loading"><i class="fa fa-spinner fa-pulse loader"></i></div>
    </section>
    
    <evt-dialog 
        data-id="errorMsg"
        data-type="error" 
        data-title="ERROR" ></evt-dialog>
    <footer>Footer</footer>


    <!-- TODO: change route system -->
    <!-- <div ng-view=""></div> -->
    
    <!-- Google Analytics: change UA-XXXXX-X to be your site's ID -->
    <!--
    <script>
       (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
       (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
       m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
       })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

       ga('create', 'UA-XXXXX-X');
       ga('send', 'pageview');
    </script>
    -->

    <!--[if lt IE 9]>
    <script src="scripts/oldieshim.c17b592e.js"></script>
    <![endif]-->

    <script src="scripts/lib.4ca47cfc.js"></script>

    <script src="scripts/evtviewer.cc2b5ba2.js"></script>

</body>
</html>
